import{api}from"../../../scripts/api.js";import{ComfyApp,app}from"../../../scripts/app.js";app.registerExtension({name:"riceround.config",async setup(){const e=localStorage.getItem("RiceRound.Setting.user.long_token");e&&64==e.length&&api.fetchApi("/riceround/set_long_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),app.ui.settings.addSetting({id:"RiceRound.Setting.name",name:"模型列表存放位置，可以制造需要的ChoiceNode",type:()=>{const e=document.createElement("tr"),t=document.createElement("td"),o=document.createElement("input");return o.type="button",o.value="打开文件夹",o.style.borderRadius="8px",o.style.padding="8px 16px",o.style.fontSize="14px",o.style.cursor="pointer",o.style.border="1px solid #666",o.style.backgroundColor="#444",o.style.color="#fff",o.onmouseover=()=>{o.style.backgroundColor="#555"},o.onmouseout=()=>{o.style.backgroundColor="#444"},o.onclick=()=>{api.fetchApi("/riceround/open_selector_list_folder",{method:"GET",headers:{"Content-Type":"application/json"}})},t.appendChild(o),e.appendChild(t),e}}),app.ui.settings.addSetting({id:"RiceRound.User.long_token",name:"设置用户token，从www.riceround.online获取",type:"text",defaultValue:"",tooltip:"用于非本机授权登录情况，请勿泄露！提倡使用本机登录授权更安全！",onChange:function(e){let t=!1;64==e.length?(localStorage.setItem("RiceRound.Setting.user.long_token",e),t=!0):e||(localStorage.removeItem("RiceRound.Setting.user.long_token"),t=!0),t&&api.fetchApi("/riceround/set_long_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})})}})}});